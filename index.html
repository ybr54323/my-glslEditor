<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GLSL Editor</title>
	<link href="favicon.gif" rel="shortcut icon" />
	<style>
		body {
			height: 100%;
			margin: 0;
			background: #171e22;
		}

		#glsl_editor {
			height: 100%;
		}
	</style>
</head>

<body>
	<div id="glsl_editor"></div>
</body>

<link type="text/css" rel="stylesheet" href="glslEditor.css">
<script type="text/javascript" src="glslEditor.js"></script>
<script type="text/javascript">
	window.glslEditor = new GlslEditor('#glsl_editor', {
		canvas_size: 500,
		canvas_draggable: true,
		canvas_resizable: true,
		theme: 'monokai',
		watchHash: true,
		fileDrops: true,
		menu: true
	});

	document.body.style.backgroundColor = window.getComputedStyle(glslEditor.editor.getWrapperElement(), null).getPropertyValue('background-color');

	const allowedOrigins = ['https://yangbingrui.info', 'http://localhost:3000'];

	window.addEventListener('message', (event) => {
		if (!allowedOrigins.includes(event.origin)) return;

		if (event.data.type === 'GLSL_UPDATE') {
			// 更新 WebGL 着色器
			updateShader(event.data.code);
		}
	});

	function updateShader(shaderCode) {
		// 在这里实现更新 WebGL 着色器的逻辑
		window.glslEditor.setContent(shaderCode);
	}

</script>

</html>